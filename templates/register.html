<!DOCTYPE html>
<html lang="en">

<head>
    <title>Register</title>
    <link rel="stylesheet" type="text/css" href="../static/register.css">
</head>

<body>
    <div class="title">
        <h2>BookSwap</h2>
        <h3>Create an account</h3>
    </div>
    <form method="POST" noValidate>
        <div class="inputs">
            <input type="text" name="email" placeholder="john123@nyu.edu" required><br>
            <input type="password" name="password" placeholder="Password" required><br>
        </div>
        <div class="buttons">
            <button type="submit" id="register-button">Create account</button>
            <a href="{{ url_for('login') }}">I already have an account</a>
        </div>

    </form>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const emailInput = document.querySelector("input[name='email']");
            const passwordInput = document.querySelector("input[name='password']");
            const submitButton = document.querySelector("#register-button");
            const form = document.querySelector("form");

            function updateButtonState() {
                const emailVal = emailInput.value.trim();
                const passwordVal = passwordInput.value.trim();

                if (emailVal && passwordVal) {
                    submitButton.disabled = false;
                    submitButton.style.backgroundColor = "black";
                    submitButton.style.color = "white";
                } else {
                    submitButton.disabled = true;
                    submitButton.style.backgroundColor = "grey";
                    submitButton.style.color = "inherit";
                }
            }

            emailInput.addEventListener("input", updateButtonState);
            passwordInput.addEventListener("input", updateButtonState);

            form.addEventListener("submit", function (event) {
                const emailVal = emailInput.value.trim();
                // If email does not end with '@nyu.edu', block submission
                if (!emailVal.endsWith("@nyu.edu")) {
                    alert("Email must end with @nyu.edu");
                    event.preventDefault();
                }
            });

            updateButtonState();
        });
    </script>
</body>

</html>